---
title: Deployment Production & Penutup Pembelajaran
---

## Materi: Pengetahuan & Konsep

Sesi terakhir ini kita deploy project ke server production supaya aplikasi bisa diakses dari internet, bukan hanya `localhost`.

**Pola deployment modern untuk fullstack app: **

- **Backend** (Express + SQLite) â†’ **Railway** (free tier, auto-detect Node.js, support database file).
- **Frontend** (HTML + Bulma) â†’ **Netlify** (free tier, drag-drop static files, auto SSL).
- **CORS** diatur supaya backend production hanya terima request dari frontend production.

---

## Praktik: Deploy Step-by-Step

### Bagian 1: Deploy Backend ke Railway

#### 1.1. Persiapan Backend

Pastikan `package.json` punya script `start`:

```json
{
  "scripts": {
    "start": "node server.js"
  }
}
```

#### 1.2. Push ke GitHub

```bash
# Di folder backend/
git init
git add .
git commit -m "Backend ready for deployment"
git branch -M main
git remote add origin https://github.com/username/book-api.git
git push -u origin main
```

#### 1.3. Deploy di Railway

1. Buka dan login dengan GitHub.
2. Klik **New Project** â†’ **Deploy from GitHub repo**.
3. Authorize Railway, pilih repository backend kamu.
4. Railway akan auto-detect Node.js dan mulai build.
5. Setelah deploy sukses, klik **Generate Domain** untuk dapat public URL (misal `https://book-api-production.up.railway.app`).

#### 1.4. Set Environment Variables di Railway

Di dashboard Railway project kamu:

1. Klik tab **Variables**.
2. Tambahkan:
   - `SESSION_SECRET`: string random panjang untuk production.
   - `NODE_ENV`: `production`.
   - `FRONTEND_URL`: (nanti diisi setelah deploy frontend).

Railway otomatis restart server setelah set variables.

#### 1.5. Test Backend Production

Buka di browser: `https://book-api-production.up.railway.app`

Kamu harus lihat JSON:

```json
{
  "message": "Books API is running (refactored)"
}
```

Test endpoint: `https://book-api-production.up.railway.app/api/books`

---

### Bagian 2: Deploy Frontend ke Netlify

#### 2.1. Persiapan Frontend

Kumpulkan semua file HTML + folder `css/` & `js/` di satu folder (misal `frontend/`):

```text
frontend/
â”œâ”€ login.html
â”œâ”€ dashboard.html
â”œâ”€ inventory.html
â”œâ”€ add-book.html
â”œâ”€ landing.html
â”œâ”€ js/
â”‚  â””â”€ main.js
â””â”€ css/
   â””â”€ custom.css (jika ada)
```

#### 2.2. Update semua URL API di frontend

Ganti semua `http://localhost:3000` dengan URL Railway production di semua file HTML/JS:

```js
// Sebelum (development)
const response = await fetch("http://localhost:3000/api/login", {
  // ...
});

// Setelah (production)
const response = await fetch(
  "https://book-api-production.up.railway.app/api/login",
  {
    // ...
  },
);
```

**Atau lebih baik, buat satu config di `js/main.js`:**

```js title="js/main.js"
// di paling atas
const API_BASE_URL =
  window.location.hostname === "localhost"
    ? "http://localhost:3000"
    : "https://book-api-production.up.railway.app";

// Lalu pakai di semua fetch
const response = await fetch(`${API_BASE_URL}/api/login`, {
  // ...
});
```

#### 2.3. Deploy di Netlify (Manual Drop)

1. Buka dan login.
2. Klik **Add new site** â†’ **Deploy manually**.
3. Drag & drop folder `frontend/` ke Netlify.
4. Tunggu beberapa detik, site kamu akan live dengan URL random (misal `https://book-publisher-demo.netlify.app`).

#### 2.4. (Opsional) Custom Domain

Di dashboard Netlify site:

- Klik **Site settings** â†’ **Change site name** â†’ ubah jadi nama yang lebih mudah diingat.
- Atau connect custom domain kalau punya.

---

### Bagian 3: Setup CORS Production di Backend

Update `src/config/env.js` untuk handle multiple frontend origins:

```js title="src/config/env.js"
require("dotenv").config();

module.exports = {
  PORT: process.env.PORT || 3000,
  SESSION_SECRET: process.env.SESSION_SECRET || "fallback-secret-change-this",
  NODE_ENV: process.env.NODE_ENV || "development",
  FRONTEND_URLS:
    process.env.FRONTEND_URLS ||
    "http://localhost:8080,https://book-publisher-demo.netlify.app",
};
```

Update `server.js` untuk dynamic origin:

```js title="server.js"
const config = require("./src/config/env");

const allowedOrigins = config.FRONTEND_URLS.split(",");

app.use(
  cors({
    origin: function (origin, callback) {
      // Allow requests with no origin (mobile apps, curl, Postman)
      if (!origin) return callback(null, true);

      if (allowedOrigins.indexOf(origin) === -1) {
        const msg =
          "The CORS policy for this site does not allow access from the specified Origin.";
        return callback(new Error(msg), false);
      }
      return callback(null, true);
    },
    credentials: true,
  }),
);
```

Commit & push perubahan ini ke GitHub, Railway akan auto-redeploy.

Update environment variable `FRONTEND_URLS` di Railway dashboard:

```
FRONTEND_URLS=http://localhost:8080,https://book-publisher-demo.netlify.app
```

---

### Bagian 4: Testing Production End-to-End

1. Buka frontend production: `https://book-publisher-demo.netlify.app/login.html`
2. Register user baru atau login dengan user test.
3. Setelah login, kamu harus diarahkan ke dashboard dan lihat username di navbar.
4. Test CRUD:
   - Lihat inventory â†’ data dari Railway database.
   - Add book â†’ POST ke Railway API â†’ berhasil tersimpan.
   - Update stock â†’ PUT berhasil.
   - Delete book â†’ DELETE berhasil.

Kalau semua flow ini jalan, **deployment production sukses!** ðŸŽ‰

---

## Penutup: Apa yang Sudah Kamu Kuasai

Setelah 30 sesi ini, kamu sudah berhasil membangun fullstack web app lengkap:

### Frontend (Bulma)

âœ… Layout: hero, section, container, columns, grid (1D & 2D)  
âœ… Elements: title, button, form, table, notification, tag, box  
âœ… Components: navbar, card, breadcrumb, modal, tabs, dropdown, menu  
âœ… Helpers: spacing, typography, flex, visibility, color  
âœ… Responsiveness: breakpoints, mobile-first design  
âœ… Dark mode & theming dengan CSS variables  
âœ… JavaScript interaktivity (fetch, DOM manipulation)

### Backend (Node.js + Express)

âœ… REST API design (GET, POST, PUT, DELETE)  
âœ… SQLite database (CRUD operations dengan better-sqlite3)  
âœ… Authentication (bcrypt + express-session)  
âœ… Middleware (auth, CORS, error handling)  
âœ… Modular structure (routes, controllers, config)  
âœ… Environment variables dengan dotenv

### Integration & Production

âœ… Frontend â†” Backend dengan fetch + JSON  
âœ… Session-based authentication dengan cookies  
âœ… CORS setup untuk production  
âœ… Deployment ke Railway (backend) + Netlify (frontend)

---

## Next Steps (Rekomendasi Lanjutan)

Kalau kamu ingin terus berkembang, pilihan next steps:

### Track 1: **Deepen Backend**

- Ganti SQLite dengan PostgreSQL/MySQL untuk production database yang lebih robust.
- Tambahkan JWT authentication sebagai alternatif session (untuk mobile app / SPA).
- Implementasi pagination, filtering, sorting di API.
- API documentation dengan Swagger/OpenAPI.

### Track 2: **Modern Frontend Framework**

- Refactor frontend ke **React** atau **Vue** + Bulma CSS.
- Gunakan state management (Redux/Zustand untuk React, Pinia untuk Vue).
- Build SPA (Single Page Application) dengan routing client-side.

### Track 3: **Advanced Features**

- File upload real (gambar cover buku) dengan multer + storage (local/S3).
- Email notification (nodemailer) saat user register/reset password.
- Real-time features dengan WebSocket (Socket.io).
- Testing (Jest untuk backend, Cypress untuk frontend).

### Track 4: **Full Production Ready**

- CI/CD pipeline dengan GitHub Actions.
- Monitoring & logging (Winston, Sentry).
- Rate limiting & security headers (helmet.js).
- Docker containerization.

---

## Pesan Penutup

Selamat! ðŸŽ‰ Kamu sudah menyelesaikan modul **"Belajar Pemrograman Web dengan Bulma + Backend"** dari dasar sampai deployment production.

Yang terpenting:

- **Jangan berhenti di sini** â€“ coding adalah skill yang terasah dengan latihan konsisten.
- **Bangun project sendiri** â€“ clone app yang kamu suka, atau buat ide original kamu.
- **Tetap update** â€“ teknologi web berkembang cepat, ikuti best practices terbaru.

Kamu sekarang punya fondasi solid untuk membangun web app modern. Good luck dengan journey berikutnya! ðŸš€

---

:::note[Catatan]
Semua file hasil refactoring (Sesi 29) dan config production bisa kamu simpan sebagai boilerplate untuk project berikutnya. Kamu sudah punya "starter template" fullstack yang bisa dipakai kapan saja!
:::
