---
title: Setup Project Node.js + Express & API Buku In‑Memory
---

## Materi: Pengetahuan & Konsep

Di sesi ini kita mulai praktik backend beneran: bikin **REST API `books` dengan Node.js + Express**, tapi dulu **tanpa database** (pakai array in‑memory).

Polanya mengikuti contoh “Hello World” Express resmi lalu kita kembangkan ke endpoint JSON.

**Struktur minimal project backend:**

```text
bulma-book-dashboard/
└─ backend/
   ├─ package.json
   └─ server.js
```

---

## Praktik: Langkah demi Langkah

### Langkah 1: Inisialisasi project backend & install Express

Di terminal (dalam folder `backend/`):

1. Inisialisasi:

   ```bash
   npm init -y
   ```

2. Install Express:

   ```bash
   npm install express
   ```

Express akan jadi dependency utama untuk HTTP server & routing.

### Langkah 2: Buat `server.js` – dari Hello World ke JSON

Mulai dari contoh “Hello World” resmi, lalu kita langsung arahkan ke JSON.

Isi `backend/server.js`:

```js
const express = require("express");
const app = express();

// Port default
const PORT = process.env.PORT || 3000;

// Middleware: parse JSON body
app.use(express.json());

// Data in-memory (sementara, belum pakai DB)
let books = [
  {
    id: 1,
    title: "Mastering Bulma",
    author: "Jeremy Thomas",
    category: "Design",
    status: "PUBLISHED",
    price: 150000,
    stock: 25,
  },
  {
    id: 2,
    title: "React for Beginners",
    author: "Some Author",
    category: "Programming",
    status: "DRAFT",
    price: 175000,
    stock: 0,
  },
];

// Route dasar untuk cek server
app.get("/", (req, res) => {
  res.json({ message: "Books API is running" });
});

// GET /api/books - ambil semua buku
app.get("/api/books", (req, res) => {
  res.json(books);
});

// GET /api/books/:id - ambil 1 buku
app.get("/api/books/:id", (req, res) => {
  const id = Number(req.params.id);
  const book = books.find((b) => b.id === id);
  if (!book) {
    return res.status(404).json({ error: "Book not found" });
  }
  res.json(book);
});

// POST /api/books - tambah buku baru
app.post("/api/books", (req, res) => {
  const data = req.body; // express.json() membuat req.body berisi object JSON [web:159][web:162][web:163]

  if (!data.title || !data.author) {
    return res.status(400).json({ error: "title dan author wajib diisi" });
  }

  const newId = books.length ? books[books.length - 1].id + 1 : 1;

  const newBook = {
    id: newId,
    title: data.title,
    author: data.author,
    category: data.category || "",
    status: data.status || "DRAFT",
    price: data.price || 0,
    stock: data.stock || 0,
  };

  books.push(newBook);
  res.status(201).json(newBook);
});

// PUT /api/books/:id - update buku
app.put("/api/books/:id", (req, res) => {
  const id = Number(req.params.id);
  const index = books.findIndex((b) => b.id === id);
  if (index === -1) {
    return res.status(404).json({ error: "Book not found" });
  }

  const data = req.body;
  const existing = books[index];

  const updated = {
    ...existing,
    title: data.title ?? existing.title,
    author: data.author ?? existing.author,
    category: data.category ?? existing.category,
    status: data.status ?? existing.status,
    price: data.price ?? existing.price,
    stock: data.stock ?? existing.stock,
  };

  books[index] = updated;
  res.json(updated);
});

// DELETE /api/books/:id - hapus buku
app.delete("/api/books/:id", (req, res) => {
  const id = Number(req.params.id);
  const index = books.findIndex((b) => b.id === id);
  if (index === -1) {
    return res.status(404).json({ error: "Book not found" });
  }

  books.splice(index, 1);
  res.status(204).send();
});

// Start server
app.listen(PORT, () => {
  console.log(`Books API listening on port ${PORT}`);
});
```

Poin penting:

- `app.use(express.json())` adalah middleware built‑in untuk parsing JSON body, sehingga kamu bisa akses `req.body` langsung di handler.
- Endpoint sesuai desain Sesi 21: `GET/POST/PUT/DELETE /api/books`.
- Storage masih array di memori (`books`), jadi **data akan hilang ketika server restart** – ini cukup untuk latihan sebelum pakai database.

### Langkah 3: Tambah script `start` di `package.json`

Di `backend/package.json`, di bagian `scripts`:

```json
"scripts": {
  "start": "node server.js"
}
```

Jalankan:

```bash
npm start
```

Kamu harus melihat log seperti:

```text
Books API listening on port 3000
```

Contoh Express “Hello World” juga memakai pola `app.listen(port, () => { console.log(...) })`, di sini kita variasikan untuk port dari environment atau 3000.

### Langkah 4: Tes API secara manual (pakai browser / curl / Postman)

Beberapa tes dasar:

- Buka di browser: `http://localhost:3000/` → harus mendapat JSON `{ "message": "Books API is running" }`.
- `GET /api/books`:
  - Browser: `http://localhost:3000/api/books` → lihat array JSON daftar buku.
- `GET /api/books/1`:
  - Browser: `http://localhost:3000/api/books/1` → satu object buku dengan `id: 1`.

Untuk `POST`, `PUT`, `DELETE`, pakai Postman / curl:

Contoh `POST` (tambah buku):

```bash
curl -X POST http://localhost:3000/api/books \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Clean Code",
    "author": "Robert C. Martin",
    'category': "Engineering",
    "status": "PUBLISHED",
    "price": 200000,
    "stock": 10
  }'
```

`express.json()` akan mem‑parse body JSON ini dan menaruhnya di `req.body` sesuai penjelasan middleware JSON untuk Express.

---

Kalau API ini sudah jalan mulus, di sesi berikutnya (Sesi 23) kita lanjut:

- Hubungkan salah satu halaman Bulma (misalnya `inventory.html`) ke API ini dengan `fetch()`:
  - Load data dari `GET /api/books` dan render ke tabel secara dinamis.
  - (Opsional) Kirim perubahan stock/price ke `PUT /api/books/:id` dari halaman quick edit.
